<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gender Reveal Bookmaker</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    text-align: center; 
    padding: 50px; 
    position: relative; 
    overflow: hidden; 
    background: #fff;
  }
  button { 
    padding: 10px 20px; 
    font-size: 18px; 
    margin: 10px; 
    cursor: pointer; 
    z-index: 2;
    position: relative;
  }
  #results { 
    margin-top: 20px; 
    font-size: 20px; 
    z-index: 2;
    position: relative;
  }
  .confetti { 
    position: absolute; 
    width: 10px; 
    height: 10px; 
    pointer-events: none;
    animation: fall 1s linear forwards;
    z-index: 2;
  }
  @keyframes fall {
    to { transform: translateY(500px) rotate(360deg); opacity: 0; }
  }

  /* Background shapes */
  .bg-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.5;
    animation: float 10s linear infinite;
  }
  @keyframes float {
    0% { transform: translateY(100vh) translateX(0) rotate(0deg); }
    100% { transform: translateY(-100px) translateX(100px) rotate(360deg); }
  }

  canvas { 
    border: 1px solid #ccc; 
    margin-top: 20px; 
    z-index: 1;
    position: relative;
  }

</style>
</head>
<body>
<h1>What's the Gender?</h1>
<p>Cast your vote!</p>

<button onclick="vote('boy', event)">üíô Boy</button>
<button onclick="vote('girl', event)">üíñ Girl</button>
<button onclick="resetVotes()">üîÑ Reset Votes</button>

<div id="results">
  Boys: <span id="boy-count">0</span> |
  Girls: <span id="girl-count">0</span> |
  Total Votes: <span id="total-count">0</span>
</div>

<div>
  Odds: üíô Boy: <span id="boy-odds">1.0</span> | üíñ Girl: <span id="girl-odds">1.0</span>
</div>

<canvas id="oddsChart" width="500" height="200"></canvas>

<script>
const PASSWORD = "KunDrenge";

// Load votes from localStorage
const votes = {
  boy: parseInt(localStorage.getItem('boy')) || 0,
  girl: parseInt(localStorage.getItem('girl')) || 0
};

const boyCountEl = document.getElementById('boy-count');
const girlCountEl = document.getElementById('girl-count');
const totalCountEl = document.getElementById('total-count');

function updateResults() {
  boyCountEl.textContent = votes.boy;
  girlCountEl.textContent = votes.girl;
  totalCountEl.textContent = votes.boy + votes.girl;
}

// Confetti animation
function triggerConfetti(event) {
  for (let i = 0; i < 30; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    confetti.style.left = (event.clientX + Math.random() * 50 - 25) + 'px';
    confetti.style.top = (event.clientY + Math.random() * 50 - 25) + 'px';
    confetti.style.width = confetti.style.height = (5 + Math.random() * 10) + 'px';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 1000);
  }
}

// Vote function
function vote(gender, event) {
  votes[gender]++;
  localStorage.setItem(gender, votes[gender]);
  updateResults();
  triggerConfetti(event);
  updateOdds();
}

// Password-protected reset
function resetVotes() {
  const input = prompt("Enter password to reset votes:");
  if (input === PASSWORD) {
    votes.boy = 0;
    votes.girl = 0;
    localStorage.setItem('boy', 0);
    localStorage.setItem('girl', 0);
    updateResults();
    oddsHistory.boy = [];
    oddsHistory.girl = [];
    updateOdds();
    alert("Votes have been reset!");
  } else {
    alert("Wrong password! ‚ùå");
  }
}

// Background shapes
function createBackgroundShapes() {
  for (let i = 0; i < 20; i++) {
    const shape = document.createElement('div');
    shape.className = 'bg-shape';
    shape.style.width = shape.style.height = (20 + Math.random() * 40) + 'px';
    shape.style.backgroundColor = Math.random() > 0.5 ? 'pink' : 'lightblue';
    shape.style.left = Math.random() * window.innerWidth + 'px';
    shape.style.top = Math.random() * window.innerHeight + 'px';
    shape.style.animationDuration = (5 + Math.random() * 10) + 's';
    document.body.appendChild(shape);
  }
}

// Odds calculation & trending chart
let oddsHistory = { boy: [], girl: [] };

function updateOdds() {
  const total = votes.boy + votes.girl;
  if(total === 0) return;

  // Simple bookmaker odds with random fluctuation
  let boyOdd = ((total / votes.boy) || 1) * (0.9 + Math.random() * 0.2);
  let girlOdd = ((total / votes.girl) || 1) * (0.9 + Math.random() * 0.2);

  document.getElementById('boy-odds').textContent = boyOdd.toFixed(2);
  document.getElementById('girl-odds').textContent = girlOdd.toFixed(2);

  oddsHistory.boy.push(boyOdd);
  oddsHistory.girl.push(girlOdd);

  if(oddsHistory.boy.length > 50) { // keep last 50 points
    oddsHistory.boy.shift();
    oddsHistory.girl.shift();
  }

  drawOddsChart();
}

function drawOddsChart() {
  const canvas = document.getElementById('oddsChart');
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const allOdds = oddsHistory.boy.concat(oddsHistory.girl);
  const maxOdd = Math.max(...allOdds) * 1.2;
  const minOdd = Math.min(...allOdds) * 0.8;

  // Boy line
  ctx.beginPath();
  ctx.strokeStyle = 'blue';
  oddsHistory.boy.forEach((o, i) => {
    const x = (i / oddsHistory.boy.length) * canvas.width;
    const y = canvas.height - ((o - minOdd)/(maxOdd - minOdd)) * canvas.height;
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });
  ctx.stroke();

  // Girl line
  ctx.beginPath();
  ctx.strokeStyle = 'pink';
  oddsHistory.girl.forEach((o, i) => {
    const x = (i / oddsHistory.girl.length) * canvas.width;
    const y = canvas.height - ((o - minOdd)/(maxOdd - minOdd)) * canvas.height;
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });
  ctx.stroke();
}

// Initialize app
updateResults();
createBackgroundShapes();
updateOdds();
</script>
</body>
</html>
