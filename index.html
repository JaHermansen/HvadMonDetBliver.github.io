<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spil p√• Antons barn og vind store pr√¶mier!</title>
<style>
  body { 
    font-family: Arial, sans-serif; 
    text-align: center; 
    padding: 50px; 
    position: relative; 
    overflow: hidden; 
    background: #fff;
  }

  h1 { font-size: 2em; margin-bottom: 5px; }
  h2 { color: #555; margin-bottom: 20px; }

  button { 
    padding: 10px 20px; 
    font-size: 18px; 
    margin: 10px; 
    cursor: pointer; 
    z-index: 2;
    position: relative;
  }

  #results, #odds-display {
    margin-top: 20px; 
    font-size: 20px; 
    z-index: 2;
    position: relative;
  }

  .confetti { 
    position: absolute; 
    width: 10px; 
    height: 10px; 
    pointer-events: none;
    animation: fall 1s linear forwards;
    z-index: 2;
  }

  @keyframes fall {
    to { transform: translateY(500px) rotate(360deg); opacity: 0; }
  }

  /* Baggrundsfigurer */
  .bg-shape {
    position: absolute;
    border-radius: 50%;
    opacity: 0.5;
    animation: float 10s linear infinite;
  }
  @keyframes float {
    0% { transform: translateY(100vh) translateX(0) rotate(0deg); }
    100% { transform: translateY(-100px) translateX(100px) rotate(360deg); }
  }

  /* Flydende ordsprog */
  .floating-saying {
    position: absolute;
    font-size: 1.2em;
    font-weight: bold;
    color: rgba(0,0,0,0.2);
    white-space: nowrap;
    user-select: none;
    pointer-events: none;
    animation: floatSaying linear infinite;
  }
  @keyframes floatSaying {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(110vw); }
  }

  canvas { 
    border: 1px solid #ccc; 
    margin-top: 20px; 
    z-index: 1;
    position: relative;
  }

  /* Betting bannere */
  .banner {
    font-size: 1.5em;
    font-weight: bold;
    color: white;
    padding: 10px 20px;
    background: linear-gradient(90deg, #ff69b4, #1e90ff);
    border-radius: 15px;
    margin: 10px auto;
    display: inline-block;
    z-index: 2;
    position: relative;
  }

</style>
</head>
<body>

<h1>üéâ Spil p√• Antons barn og vind store pr√¶mier! üéâ</h1>
<h2>G√¶t p√• dreng eller pige!</h2>

<div class="banner">S√¶t dine penge NU! üí∞</div>

<button onclick="vote('boy', event)">üíô Spil p√• Dreng</button>
<button onclick="vote('girl', event)">üíñ Spil p√• Pige</button>
<button onclick="resetVotes()">üîÑ Nulstil Stemmer</button>

<div id="results">
  Drenges stemmer: <span id="boy-count">0</span> |
  Piges stemmer: <span id="girl-count">0</span> |
  Samlet antal stemmer: <span id="total-count">0</span>
</div>

<div id="odds-display">
  Odds: üíô Dreng: <span id="boy-odds">1.0</span> | üíñ Pige: <span id="girl-odds">1.0</span>
</div>

<canvas id="oddsChart" width="500" height="200"></canvas>

<script>
const PASSWORD = "KunDrenge";

const votes = {
  boy: parseInt(localStorage.getItem('boy')) || 0,
  girl: parseInt(localStorage.getItem('girl')) || 0
};

const boyCountEl = document.getElementById('boy-count');
const girlCountEl = document.getElementById('girl-count');
const totalCountEl = document.getElementById('total-count');

function updateResults() {
  boyCountEl.textContent = votes.boy;
  girlCountEl.textContent = votes.girl;
  totalCountEl.textContent = votes.boy + votes.girl;
}

// Confetti animation
function triggerConfetti(event) {
  for (let i = 0; i < 30; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    confetti.style.left = (event.clientX + Math.random() * 50 - 25) + 'px';
    confetti.style.top = (event.clientY + Math.random() * 50 - 25) + 'px';
    confetti.style.width = confetti.style.height = (5 + Math.random() * 10) + 'px';
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 1000);
  }
}

// Vote function
function vote(gender, event) {
  votes[gender]++;
  localStorage.setItem(gender, votes[gender]);
  updateResults();
  triggerConfetti(event);
  generateTargetOdds();
  updateBackgroundColors();
}

// Password-protected reset
function resetVotes() {
  const input = prompt("Indtast adgangskode for at nulstille stemmer:");
  if (input === PASSWORD) {
    votes.boy = 0;
    votes.girl = 0;
    localStorage.setItem('boy', 0);
    localStorage.setItem('girl', 0);
    updateResults();
    oddsHistory.boy = [];
    oddsHistory.girl = [];
    targetOdds.boy = 1;
    targetOdds.girl = 1;
    alert("Stemmerne er nulstillet!");
    updateBackgroundColors();
  } else {
    alert("Forkert adgangskode! ‚ùå");
  }
}

// Baggrundsfigurer der reagerer p√• stemmetendenser
function createBackgroundShapes() {
  for (let i = 0; i < 30; i++) {
    const shape = document.createElement('div');
    shape.className = 'bg-shape';
    shape.style.width = shape.style.height = (20 + Math.random() * 40) + 'px';
    shape.style.left = Math.random() * window.innerWidth + 'px';
    shape.style.top = Math.random() * window.innerHeight + 'px';
    shape.style.animationDuration = (5 + Math.random() * 10) + 's';
    document.body.appendChild(shape);
  }
}

function updateBackgroundColors() {
  const shapes = document.querySelectorAll('.bg-shape');
  const total = votes.boy + votes.girl || 1;
  const boyRatio = votes.boy / total;
  shapes.forEach(shape => {
    shape.style.backgroundColor = Math.random() < boyRatio ? 'lightblue' : 'pink';
  });
}

// Flydende danske ordsprog
const sayings = [
  "Uha hvad mon det bliver?",
  "Kommer der en mand ind, kommer der en mand ud",
  "Kun rigtige m√¶nd f√•r drenge",
  "Hvem g√¶tter rigtigt?",
  "Pink eller bl√•, g√¶t med!",
  "Er det en lille prins eller en lille diva?",
  "Kun de modige t√∏r satse p√• drenge!",
  "Pigerne tager over ‚Äì eller g√∏r de?",
  "S√¶t dine penge p√• noget bl√∏dt og lyser√∏dt!",
  "Bl√• blod eller pink galskab?",
  "Baby er p√• vej ‚Äì og du kan vinde stort!",
  "Hvem f√•r flest lykke-stjerner: dreng eller pige?",
  "Er du drenge-guru eller pige-profet?",
  "Hvis du g√¶tter forkert, m√• du rydde bleerne!",
  "Kun de kloge ser fremtiden‚Ä¶ og barnet!"
];


function createFloatingSayings() {
  sayings.forEach(text => {
    const span = document.createElement('div');
    span.className = 'floating-saying';
    span.textContent = text;
    span.style.top = Math.random() * window.innerHeight + 'px';
    span.style.animationDuration = (20 + Math.random()*20) + 's';
    span.style.fontSize = (16 + Math.random()*20) + 'px';
    document.body.appendChild(span);
  });
}

// Oddsberegning & trending diagram
let oddsHistory = { boy: [], girl: [] };
let currentOdds = { boy: 1, girl: 1 };
let targetOdds = { boy: 1, girl: 1 };

function generateTargetOdds() {
  const total = votes.boy + votes.girl;
  if(total === 0) return;
  targetOdds.boy = ((total / votes.boy) || 1) * (0.9 + Math.random() * 0.2);
  targetOdds.girl = ((total / votes.girl) || 1) * (0.9 + Math.random() * 0.2);
}

function animateOdds() {
  const smoothing = 0.05;
  currentOdds.boy += (targetOdds.boy - currentOdds.boy) * smoothing;
  currentOdds.girl += (targetOdds.girl - currentOdds.girl) * smoothing;

  document.getElementById('boy-odds').textContent = currentOdds.boy.toFixed(2);
  document.getElementById('girl-odds').textContent = currentOdds.girl.toFixed(2);

  oddsHistory.boy.push(currentOdds.boy);
  oddsHistory.girl.push(currentOdds.girl);

  if(oddsHistory.boy.length > 100) {
    oddsHistory.boy.shift();
    oddsHistory.girl.shift();
  }

  drawChart();
  requestAnimationFrame(animateOdds);
}

// Simple canvas line chart
const canvas = document.getElementById('oddsChart');
const ctx = canvas.getContext('2d');

function drawChart() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawLine(oddsHistory.boy, 'blue');
  drawLine(oddsHistory.girl, 'pink');
}

function drawLine(history, color) {
  ctx.beginPath();
  history.forEach((val, i) => {
    const x = i / 100 * canvas.width;
    const y = canvas.height - (val / 5 * canvas.height);
    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  });
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;
  ctx.stroke();
}

// Initialize
updateResults();
createBackgroundShapes();
updateBackgroundColors();
createFloatingSayings();
animateOdds();
</script>

</body>
</html>
